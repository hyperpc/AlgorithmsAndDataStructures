# 结构体：更为复杂的数据类型

结构体struct，由一组数据变量或数据值组成，这些数据变量和数据值组合存放再单一的内存块中  
可以把结构体，理解为一种更复杂的数据类型

## 基本要点

C#中的结构体，是一种值类型，分配在栈中，而不是堆上；对一小组相互关联的字段进行封装，有点像类  
C#的结构体中，支持定义方法、字段、属性常量、索引器、运算符方法、嵌套类型、事件及构造函数(非自动生成的默认构造函数)，还可以实现多个接口  
但不支持继承，不能声明为抽象、保护或虚拟类型  
可以不通过显示的new实例化结构体，但其所有字段再未赋值前不可用  

定义结构的原则建议：

- 逻辑上应表示成一个类似原始类型的单一值  
- 每个实例应小于16个字节  
- 数据被实例化后应视作不可变immutable  
- 不需要重复装箱和拆箱  

结构体和类的功能差异：  

- 结构体可对单个组件进行设置和访问；类也可以  
- 结构体可作为函数的入参；类也可以  
- 结构体可通过赋值运算符`=`将内容赋给另一个结构体；类也可以实现  
- 函数可以复制结构体，并返回副本，栈中就会有两个结构体；类也可以，甚至传递引用更使用  
- 不能通过相等运算符`==`来判断两个结构体是否相等，需要更复杂的字段逐一比较；而类却可以  

```csharp
    public struct MyStruct
    {
        private int xval;
        public int X
        {
            get { return xval; }
            set 
            {
                if (value < 100)
                    xval = value;
            }
        }

        public void WriteToConsole()
        {
            Console.WriteLine($"The x value is: {xval}");
        }
    }
```

参考类StructTest.Waypoint()和结构体StructTest.WaypointStruct()  

> JAVA没有原生支持结构体，但可以通过建立公用的类实现，性能却大打折扣  

## 枚举类型

枚举，适合在大量抽象数据的可读表示时使用  

### 案例学习：地铁线路

参考类StructTest.Waypoint()  
